/*!
 * Yama JavaScript library v0.1.0
 * (c) Onur Ã‡elebi
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */
;var yama=null;yama=function(){var b="_obs_";var d=function(p,r,m){var n=p[r],o=n,l=function(){return o},q=function(s){n=o;return o=m.call(p,r,n,s)};if(delete p[r]){if(Object.defineProperty){Object.defineProperty(p,r,{get:l,set:q})}else{if(Object.prototype.__defineGetter__&&Object.prototype.__defineSetter__){Object.prototype.__defineGetter__.call(p,r,l);Object.prototype.__defineSetter__.call(p,r,q)}}}};function e(n){var l=this,o=[];l.onItemAdded=null;l.onItemSet=null;l.onItemRemoved=null;function m(p){if(!(p in l)){Object.defineProperty(l,p,{configurable:true,enumerable:true,get:function(){return o[p]},set:function(q){o[p]=q;if(typeof l.onItemSet==="function"){l.onItemSet(p,q)}}})}}l.push=function(){var p;for(var q=0,r=arguments.length;q<r;q++){p=o.length;o.push(arguments[q]);m(p);if(typeof l.onItemAdded==="function"){l.onItemAdded(p,arguments[q])}}return o.length};l.pop=function(){if(~o.length){var p=o.length-1,q=o.pop();delete l[p];if(typeof l.onItemRemoved==="function"){l.onItemRemoved(p,q)}return q}};l.unshift=function(){for(var p=0,q=arguments.length;p<q;p++){o.splice(p,0,arguments[p]);m(o.length-1);if(typeof l.onItemAdded==="function"){l.onItemAdded(p,arguments[p])}}return o.length};l.shift=function(){if(~o.length){var p=o.shift();o.length===0&&delete l[index];if(typeof l.onItemRemoved==="function"){l.onItemRemoved(0,p)}return p}};l.splice=function(p,r){var u=[],t,v;p=!~p?o.length-p:p;r=(r==null?o.length-p:r)||0;while(r--){t=o.splice(p,1)[0];u.push(t);delete l[o.length];if(typeof l.onItemRemoved==="function"){l.onItemRemoved(p+u.length-1,t)}}for(var q=2,s=arguments.length;q<s;q++){o.splice(p,0,arguments[q]);m(o.length-1);if(typeof l.onItemAdded==="function"){l.onItemAdded(p,arguments[q])}p++}return u};Object.defineProperty(l,"length",{configurable:false,enumerable:true,get:function(){return o.length},set:function(p){var q=Number(p);if(q%1===0&&q>=0){if(q<o.length){l.splice(q)}else{if(q>o.length){l.push.apply(l,new Array(q-o.length))}}}else{throw new RangeError("Invalid array length")}return p}});Object.getOwnPropertyNames(Array.prototype).forEach(function(p){if(!(p in l)){Object.defineProperty(l,p,{configurable:false,enumerable:true,writeable:false,value:Array.prototype[p]})}});if(n instanceof Array){l.push.apply(l,n)}}function k(l){var m=window.onload;if(typeof window.onload!="function"){window.onload=l}else{window.onload=function(){m();l()}}}function i(o,q){var n=q.split(".");var s=o.length-1;var p=null;var u=null;var v=true;do{p=o[s];s--;var l=p;var r=null;for(var m=0;m<n.length&&l;m++){var t=n[m];r=l;l=l[t]}if(typeof(l)!="undefined"){v=false;u=n[n.length-1];p=r}}while(s>=0&&v);if(s==-1){console.log("Unable to find reference to "+q)}return{context:p,contextAccessor:u}}function g(p,s,w,r,q){var o={text:1,avalue:1};var m={onclick:1,value:1,onenter:1};var l=i(s,q);var v=l.context;var t=l.contextAccessor;if(!v){return}if(o[r]){var n=b+t;if(!v[n]){v[n]=[]}var u=null;if(r=="text"){u=function(){return function(x){w.innerHTML=x}}()}if(r=="avalue"){u=function(){return function(x){w.value=x}}()}if(u){v[n].push(u);if(typeof(v[t])!="undefined"){u(v[t])}}}if(m[r]){if(r=="onclick"){console.log(s);console.log(v);var u=function(){return function(){var x=s.slice(0);w.onclick=function(){p[q].call(v,function(z){var y=i(x,z);return y.context[y.contextAccessor]})}}}();u()}if(r=="value"){var u=function(){return function(y){var x=w.onkeyup;w.onkeyup=function(z){if(x){x.call(this,z)}v[q]=this.value}}}();u()}if(r=="onenter"){var u=function(){return function(y){var x=w.onkeyup;w.onkeyup=function(z){if(x){x.call(this,z)}if(z.keyCode==13){p[q].call(v)}}}}();u()}}}function j(l){if(l=="div"){return document.createElement("div")}if(l=="span"){return document.createElement("span")}if(l=="input"){return document.createElement("input")}}function c(o,r,q){var m=q.split(".");var l=yama.components;for(var n=0;n<m.length;n++){var p=m[n];if(l[p]){l=l[p]}else{l=null;break}}if(!l||typeof(l)!="function"){throw"Component not found : "+q}var s=new l(r,o);return s}function f(o,r,x,y,q,w,t,p,n){var m=b+p;var l=i(r,p);var v=l.context;var s=l.contextAccessor;var n=n||"index";if(!v[m]){v[m]=[]}var u=null;u=function(){return function(B){x.innerHTML="";if(!B){return}for(var A=0;A<B.length;A++){var z={};z[n]=A;z[t]=B[A];r.push(z);a(o,r,x,false,y,q+1,w);r.pop()}}}();if(u){v[m].push(u);u(v[s])}}function a(O,I,v,K,n,t,r){var D=t;if(D<n.length){var y=n[D];var L=y.match(/([ \t]+)?([\w\.]+)?:*([\w\.]*)?(.*)?/);var p=L[1].length;var C=L[2];var o=L[3];var E=L[4];if(D==t){if(K){if(C!="root"){throw"Must have a root tagged element"}else{return a(O,I,v,false,n,D+1,p)}}}if(p<=r){return D}var z=null;var H=D+1;var x=I[I.length-1];if(v){var N={div:1,span:1,input:1};if(N[C]){z=j(C);if(o){z.className=o;x[o]=z}v.appendChild(z);if(E){var s=E.split(/\s+/);for(var F=0;F<s.length;F++){var q=s[F];var A=q.match(/([ \t]+)?([\w\.]+)?:*([\w\.]*)?(.*)?/);var w=A[2];var B=A[3];if(w){g(O,I,z,w,B)}}}}else{if(C=="foreach"){var m=null;var M=null;var J=o;if(E){var s=E.split(/\s+/);for(var F=0;F<s.length;F++){var q=s[F];var A=q.match(/([ \t]+)?(\w+)?:*([\w\.]*)?(.*)?/);var w=A[2];var B=A[3];if(w){m=w;M=B}}}f(O,I,v,n,D,p,m,M,J);H=a(O,I,null,false,n,D+1,p)}else{var G=c(x,v,C);if(o){x[o]=G}if(E){var s=E.split(/\s+/);for(var F=0;F<s.length;F++){var q=s[F];var A=q.match(/([ \t]+)?([\w\.]+)?:*([\w\.]*)?(.*)?/);var w=A[2];var B=A[3];if(w){if(typeof(x[B])=="function"){G[w]=function(){x[B].call(x)}}else{if(typeof(x[B])!="undefined"){var u=b+B;if(!x[u]){x[u]=[]}var l=null;l=function(){return function(P){G[w]=P}}();if(l){x[u].push(l);if(typeof(x[B])!="undefined"){l(x[B])}}}}}}}}}}if(z){H=a(O,I,z,false,n,D+1,p)}H=a(O,I,v,false,n,H,r);return H}return D}var h={register:function(q){var r=q.draw.toString().replace(/^[^\/]+\/\*!?/,"").replace(/!\*\/[^\/]+$/,"");var l={draw:1,init:1,name:1};var o=q.name.split(".");var n=function(D,x){var w=[];if(x){w.push(x)}w.push(this);var y=w[w.length-1];var B=[];for(var u in q){if(!l[u]){if(typeof(q[u])!="function"){var z=this;this[u]=q[u];d(this,u,function(F,M,H){if(H instanceof Array){var E=new e(H);var I=function(){var N=F;return function(){var O=b+N;if(y[O]){var R=y[O];for(var Q=0;Q<R.length;Q++){var P=R[Q];if(P){P(E)}}}}}();E.onItemAdded=I;E.onItemSet=I;E.onItemRemoved=I;z[F]=E;I();return E}else{var G=b+F;if(y[G]){var J=y[G];for(var L=0;L<J.length;L++){var K=J[L];if(K){K(H)}}}return H}});B.push(u)}else{y[u]=q[u]}}}var C=r.match(/[^\r\n]+/g);a(q,w,D,true,C,0,-1);for(var v=0;v<B.length;v++){var A=B[v];this[A]=this[A]}if(q.init){q.init.call(this,D)}};var p={};var t=this.components;for(var m=0;m<o.length;m++){var s=o[m];if(m==o.length-1){if(t[s]){throw"Component name collision : "+s}else{t[s]=n;t[s].prototype=p}}else{if(!t[s]){t[s]={}}}t=t[s]}},addLoadEvent:function(l){k(l)},components:{}};return h}();